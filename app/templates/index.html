{%extends 'base.html'%} {% block styles%}{{super()}}
<link rel="stylesheet" href="{{url_for('static',filename='css/style.css')}}" />
{%endblock%} {%block content%}
<div class="card-deck" id="profs">
  {% for image in images %}
  <div class="card">
    <img class="card-img-top" id="imgpost" src="{{url_for('static', filename='uploads/'+image.name)}}"
      alt="This is the image" srcset="" />
    <div class="card-body">
      <div class="reactions">
        <div>{{image.likes|length}}
          {% if user.id in image.likes|map(attribute="author")|list %}
          <a name="" id="" class="btn btn-primary" href="/like/{{image.id}}" role="button">
            <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="1em" height="1em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 48 48"><path fill="#F44336" d="M34 9c-4.2 0-7.9 2.1-10 5.4C21.9 11.1 18.2 9 14 9C7.4 9 2 14.4 2 21c0 11.9 22 24 22 24s22-12 22-24c0-6.6-5.4-12-12-12z"/></svg>
          </a>
         {% else %}
         <a name="" id="" class="btn btn-primary" href="/like/{{image.id}}" role="button">
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="1.4em" height="1.4em"
            preserveAspectRatio="xMidYMid meet" viewBox="0 0 48 48">
            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"
              d="M15 8C8.925 8 4 12.925 4 19c0 11 13 21 20 23.326C31 40 44 30 44 19c0-6.075-4.925-11-11-11c-3.72 0-7.01 1.847-9 4.674A10.987 10.987 0 0 0 15 8Z" /></svg>
          </a>
        {% endif %}
       </div>
        <a name="" id="" class="btn btn-primary" href="#" role="button">
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="1.4em" height="1.4em"
            preserveAspectRatio="xMidYMid meet" viewBox="0 0 512 512">
            <path fill="currentColor"
              d="M256 32C114.6 32 0 125.1 0 240c0 47.6 19.9 91.2 52.9 126.3C38 405.7 7 439.1 6.5 439.5c-6.6 7-8.4 17.2-4.6 26S14.4 480 24 480c61.5 0 110-25.7 139.1-46.3C192 442.8 223.2 448 256 448c141.4 0 256-93.1 256-208S397.4 32 256 32zm0 368c-26.7 0-53.1-4.1-78.4-12.1l-22.7-7.2l-19.5 13.8c-14.3 10.1-33.9 21.4-57.5 29c7.3-12.1 14.4-25.7 19.9-40.2l10.6-28.1l-20.6-21.8C69.7 314.1 48 282.2 48 240c0-88.2 93.3-160 208-160s208 71.8 208 160s-93.3 160-208 160z" />
          </svg>
        </a>

        <a name="" id="" class="btn btn-primary" href="{{url_for('main.userprofile',uname= image.author)}}"
          role="button">
          <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" width="1.4em" height="1.4em"
            preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24">
            <path fill="currentColor"
              d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2zM7.35 18.5C8.66 17.56 10.26 17 12 17s3.34.56 4.65 1.5c-1.31.94-2.91 1.5-4.65 1.5s-3.34-.56-4.65-1.5zm10.79-1.38a9.947 9.947 0 0 0-12.28 0A7.957 7.957 0 0 1 4 12c0-4.42 3.58-8 8-8s8 3.58 8 8c0 1.95-.7 3.73-1.86 5.12z" />
            <path fill="currentColor"
              d="M12 6c-1.93 0-3.5 1.57-3.5 3.5S10.07 13 12 13s3.5-1.57 3.5-3.5S13.93 6 12 6zm0 5c-.83 0-1.5-.67-1.5-1.5S11.17 8 12 8s1.5.67 1.5 1.5S12.83 11 12 11z" />
          </svg>
        </a>
        <div class="captn">
      <p class="card-text">{{image.caption}}</p>
      <p>{{image.posted.strftime("%Y-%m-%d")}}</p>
    </div>
      </div>
      <div class="card-body">
        <div class="collapse" id="comments-{{image.id}}">
          <div class="card">
            <div class="card-body" id="comments-expanded-{{image.id}}">
              {% for comment in image.comments %}
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <a href="/uploadimage/{{comment.author.username}}">{{comment.author.username}}</a>:
                  {{comment.text}}
                </div>
                <div>
                  <small class="text-muted">{{comment.date_created}}</small>
                </div>
              </div>

              {%endfor%}
            </div>
          </div>
        </div>
        <p class="card-text">
          {% if image.comments|length > 0 %}
          <a data-bs-toggle="collapse" href="#comments-{{image.id}}" role="button">
            <small>View {{image.comments|length}} Comments</small>
          </a>
          {% else %}
          <small class="text-muted">Leave a comment</small>
          {% endif %}
        </p>
        <form class="input-group mb-3" method="POST" action="/comment/{{image.id}}">
          <input type="text" id="text" name="text" class="form-control" placeholder="Write a comment">
          <button type="submit" class="btn btn">Comment</button>
        </form>
      </div>


    </div>
    
  </div>
  {%endfor%}

</div>


{%endblock%}